# 动量优化器

动量优化器是一个用于优化模具动量平衡的工具，它通过评估力矩比率和相对标准差来优化模具的动量分布。

## 目录结构

```
momentum/
├── core/                 # 核心定义
│   ├── config.ts        # 参数范围和配置
│   └── types.ts         # 类型定义
├── scoring/             # 评分系统
│   ├── calculator.ts    # 评分计算器
│   └── test-cases.ts    # 测试用例
├── utils/               # 工具函数
│   └── param-converter.ts # 参数转换器
├── index.ts            # 导出接口
├── optimizer.ts        # 优化器实例
└── runner.ts           # 运行器
```

## 主要组件

### 1. 核心定义 (core/)

- **types.ts**: 定义了动量优化器的核心类型
  - `MomentumInput`: 评分输入（比率和RSD）
  - `MomentumConfig`: 优化器配置
  - `FlatParams`: 扁平化参数

- **config.ts**: 定义了参数范围和配置
  - 阈值范围
  - 权重配置
  - 分数区间
  - 奖励和惩罚参数

### 2. 评分系统 (scoring/)

- **calculator.ts**: 实现评分逻辑
  - 基础分计算
  - 奖励计算
  - 惩罚计算
  - 总分计算

- **test-cases.ts**: 定义测试用例
  - 理想情况
  - 良好情况
  - 中等情况
  - 较差情况
  - 极端情况

### 3. 工具函数 (utils/)

- **param-converter.ts**: 参数转换工具
  - 扁平参数到配置的转换
  - 参数映射定义

### 4. 主要文件

- **index.ts**: 统一导出接口
- **optimizer.ts**: 优化器实例创建
- **runner.ts**: 优化执行器

## 使用方法
```typescript
import { runMomentumOptimizer } from "./momentum";
await runMomentumOptimizer(iterations);
```

## 评分标准

- **理想情况** (90-100分):
  - 比率接近1.0
  - RSD接近0.01

- **良好情况** (85-95分):
  - 比率在1.05左右
  - RSD在0.05左右

- **中等情况** (70-85分):
  - 比率在1.15左右
  - RSD在0.15左右

- **较差情况** (50-70分):
  - 比率在1.25左右
  - RSD在0.25左右

- **极端情况** (35-45分):
  - 比率超过1.35
  - RSD超过0.30

## 优化目标

优化器通过遗传算法寻找最优参数配置，以实现：

1. 最小化力矩比率偏差
2. 最小化相对标准差
3. 平衡各项指标的权重
4. 合理分配奖励和惩罚

## 注意事项

1. 参数范围的设置需要考虑实际工程限制
2. 权重配置需要根据具体应用场景调整
3. 测试用例应覆盖各种可能的情况
4. 优化结果需要结合实际情况验证
